<% provide(:title, 'Directory') %>
<h1 class="centered">Directory</h1>

<%= search_form_for @search, url: "", class: "directory-search" do |f| %>
  <%= f.label "Search for resident:", class: "col control-label" %>
  <%= f.search_field :full_name_or_nickname_cont, class: "form-control",
                     placeholder: 'Enter name' %>
  <div class="directory-search__controls">
    <div class="directory-search__neighborhood">
      <%= f.label "Neighborhood",
                  class: "col control-label directory-search__neighborhood-label" %>
      <%= f.collection_select(:neighborhood_eq,
        Profile.select(:neighborhood).uniq.order(:neighborhood),
        :neighborhood, :neighborhood, include_blank: true) %>
    </div>
    <div class="directory-search__button-container">
      <%= f.submit "Search", class: "directory-search__button" %>
      <a class="directory-search__button directory-search__button--reset"
         href="<%= profiles_path %>">
        Reset
      </a>
    </div>
  </div>
<% end %>

<main class="pictures">
  <% if @results.blank? %>
    <p>No results. Try searching for something else.</p>
  <% else %>
    <% @results.each do |profile| %>
      <a class="profile" href="<%= profile[:link] %>">
        <div class="profile__picture-wrapper">
          <img class="profile__picture" src="<%=profile[:image_url] %>">
        </div>
        <h2 class="profile__name">
          <%= profile[:name] %>
        </h2>
      </a>
    <% end %>
  <% end %>
</main>

<% provide(:image_credit, raw('
  Default profile icon made by <a href="https://www.freepik.com/">Freepik</a>
  from <a href="https://www.flaticon.com/">www.flaticon.com</a>
')) %>
